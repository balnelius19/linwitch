<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Tirage de Runes</title>
  <style>
    body { font-family: sans-serif; max-width: 700px; margin: auto; padding: 20px; background: #f4f4f4; }
    h1 { text-align: center; }
    .rune { background: #fff; margin: 10px 0; padding: 10px; border-left: 4px solid #444; }
    button { padding: 10px 15px; margin: 10px 5px 20px 0; font-size: 16px; }
    .disabled { background: #ccc; cursor: not-allowed; }
  </style>
</head>
<body>
  <h1>üîÆ Tirage de 3 Runes</h1>
  <button id="tirer" onclick="tirage()">Tirer</button>
  <button id="exporter" onclick="exporter()" disabled>üìÑ Exporter</button>
  <div id="resultat"></div>

  <script>
    const runes = [
      { nom: "Fehu", pos: "Richesse, gains.", neg: "Perte, instabilit√©.", bon: true },
      { nom: "Uruz", pos: "Force, sant√©.", neg: "Faiblesse, confusion.", bon: true },
      { nom: "Thurisaz", pos: "Protection, transformation.", neg: "Conflit, impulsivit√©.", bon: false },
      { nom: "Ansuz", pos: "Communication, sagesse.", neg: "Silence, doute.", bon: true },
      { nom: "Raidho", pos: "Voyage, √©volution.", neg: "Retard, stagnation.", bon: true },
      { nom: "Kenaz", pos: "Clart√©, connaissance.", neg: "Obscurit√©, confusion.", bon: true },
      { nom: "Gebo", pos: "Don, √©change.", neg: "D√©pendance, rupture.", bon: true },
      { nom: "Wunjo", pos: "Joie, harmonie.", neg: "Tension, frustration.", bon: true },
      { nom: "Hagalaz", pos: "√âpreuve, purification.", neg: "Chaos prolong√©.", bon: false },
      { nom: "Nauthiz", pos: "Endurance, discipline.", neg: "Souffrance, blocage.", bon: false },
      { nom: "Isa", pos: "Pause, introspection.", neg: "Isolement, stagnation.", bon: false },
      { nom: "Jera", pos: "R√©colte, r√©compense.", neg: "Retard, impatience.", bon: true },
      { nom: "Eihwaz", pos: "R√©silience, transition.", neg: "Peur du changement.", bon: true },
      { nom: "Perthro", pos: "Myst√®re, destin√©e.", neg: "Secrets, illusion.", bon: true },
      { nom: "Algiz", pos: "Protection, intuition.", neg: "Vuln√©rabilit√©.", bon: true },
      { nom: "Sowilo", pos: "Succ√®s, lumi√®re.", neg: "√âchec, orgueil.", bon: true },
      { nom: "Tiwaz", pos: "Justice, honneur.", neg: "Conflit, perte de direction.", bon: true },
      { nom: "Berkano", pos: "Naissance, croissance.", neg: "Instabilit√© √©motionnelle.", bon: true },
      { nom: "Ehwaz", pos: "Confiance, coop√©ration.", neg: "M√©fiance, inertie.", bon: true },
      { nom: "Mannaz", pos: "Humanit√©, relations.", neg: "Isolement, orgueil.", bon: true },
      { nom: "Laguz", pos: "Intuition, fluidit√©.", neg: "Confusion √©motionnelle.", bon: true },
      { nom: "Ingwaz", pos: "Fertilit√©, paix.", neg: "Agitation, dispersion.", bon: true },
      { nom: "Dagaz", pos: "√âveil, transformation.", neg: "Stagnation, r√©sistance.", bon: true },
      { nom: "Othala", pos: "H√©ritage, racines.", neg: "Rupture familiale.", bon: true },
      { nom: "Wyrd", pos: "Destin, myst√®re.", neg: "Karma non r√©solu.", bon: false }
    ];

    let tirageRunes = [];

    function tirage() {
      const now = Date.now();
      const last = localStorage.getItem("tirageRunes");
      if (last && now - last < 3600000) {
        alert("‚è≥ Tirage d√©j√† effectu√©. Attends une heure.");
        return;
      }
      localStorage.setItem("tirageRunes", now);
      document.getElementById("tirer").disabled = true;
      document.getElementById("tirer").classList.add("disabled");
      document.getElementById("exporter").disabled = false;

      const tirage = [];
      const pool = [...runes];
      for (let i = 0; i < 3; i++) {
        const r = pool.splice(Math.floor(Math.random() * pool.length), 1)[0];
        const sens = Math.random() < 0.5 ? "droite" : "invers√©e";
        const texte = sens === "droite" ? r.pos : r.neg;
        const bon = (sens === "droite") === r.bon;
        tirage.push({ nom: r.nom, sens, texte, bon });
      }
      tirageRunes = tirage;
      document.getElementById("resultat").innerHTML = tirage.map(r =>
        `<div class="rune"><h2>${r.nom} (${r.sens})</h2><p>${r.texte}</p><p><strong>${r.bon ? "üåü √ânergie favorable" : "‚ö†Ô∏è √ânergie contrari√©e"}</strong></p></div>`
      ).join("");
    }

    function exporter() {
      if (!tirageRunes.length) return;
      let txt = "üîÆ Tirage de runes\n\n";
      tirageRunes.forEach((r, i) => {
        txt += `Rune ${i + 1} : ${r.nom} (${r.sens})\n`;
        txt += `Interpr√©tation : ${r.texte}\n`;
        txt += `√ânergie : ${r.bon ? "Favorable" : "Contrari√©e"}\n\n`;
      });
      const blob = new Blob([txt], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "tirage_runes.txt";
      link.click();
    }

    window.onload = () => {
      const now = Date.now();
      const last = localStorage.getItem("tirageRunes");
      if (last && now - last < 3600000) {
        document.getElementById("tirer").disabled = true;
        document.getElementById("tirer").classList.add("disabled");
        document.getElementById("resultat").innerHTML = "<p>‚è≥ Tirage d√©j√† effectu√©. Reviens dans une heure.</p>";
      } else {
        tirage();
      }
    };
  </script>
</body>
</html>

